<?php require('template/header.phtml'); ?>

<div class="container-fluid fade-section">
    <div class="row h-100">

        <!-- LEFT SIDE IMAGE -->
        <div class="col-lg-8 col-md-7 p-3 d-md-block">
            <div style="position: relative; width: 100%; padding-top: 66.67%">
                <img src="/images/youth_invest.png"
                     style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                     object-fit: cover; border-radius: 20px;"
                     alt="banner">
            </div>
        </div>

        <!-- RIGHT SIDE LOGIN -->
        <div class="col-lg-4 col-md-5 col-12 p-3 d-flex align-items-center justify-content-center">

            <div class="login-card p-4 shadow bg-white fade-section" style="width: 100%; max-width: 380px; border-radius: 20px;">
                <?php if ($view->user->isLoggedIn()): ?>

                    <h4 class="fw-bold text-danger mb-2">Ready to Begin?</h4>
                    <p class="text-size mb-3">
                        Your learning journey will guide you step-by-step through everything you need to know.
                    </p>
                    <a href="roadmap.php" class="btn btn-danger w-100 fw-semibold text-size">
                        Start Learning →
                    </a>

                <?php else: ?>

                    <h2 class="text-center mb-4 fw-semibold">Login</h2>

                    <?php if (!empty($view->authMessage)): ?>
                        <div class="alert alert-info text-center">
                            <?= htmlspecialchars($view->authMessage); ?>
                        </div>
                    <?php endif; ?>

                    <form action="index.php" method="POST">

                        <div class="mb-3">
                            <label for="username" class="form-label fw-semibold">Username</label>
                            <input type="text" name="username" id="username" class="form-control" required>
                        </div>

                        <div class="mb-3">
                            <label for="password" class="form-label fw-semibold">Password</label>
                            <input type="password" name="password" id="password" class="form-control" required>
                        </div>

                        <button type="submit" name="loginBtn" class="btn btn-danger w-100 fw-semibold ripple-btn">
                            Login
                        </button>

                        <div class="text-center mt-3">
                            <a href="register.php" class="text-decoration-none">Don't have an account? Register</a>
                        </div>

                    </form>

                <?php endif; ?>
            </div>

        </div>
    </div>
</div>

<div class="container">

    <!-- SECTION 1 -->
    <section class="text-center d-flex flex-column flex-md-row align-items-center rounded-4 mb-5 reveal-on-scroll">
        <div class="flex-grow-1 pe-md-4">
            <h2 class="text-danger fw-bold my-4 header-size">Welcome to YouthInvest</h2>
            <p class="text-size">
                <strong>YouthInvest</strong> — where learning about money feels more like a game than a classroom.
                Explore how saving, spending, and investing really work through stories and missions designed to
                build your confidence step-by-step.
            </p>
        </div>
    </section>

    <!-- SECTION 2 TIMELINE -->
    <section class="aj-timeline-section p-4 rounded-4 mb-4 reveal-on-scroll">
        <h2 class="fw-bold text-danger mb-3">Your Learning Journey</h2>
        <p class="text-size">Think of this as your adventure map — each stage is a new level to unlock:</p>

        <div class="aj-timeline mt-4 text-size">
            <div class="aj-timeline-item"><span class="aj-timeline-dot"></span><p>Module 1 – What is Investing?</p></div>
            <div class="aj-timeline-item"><span class="aj-timeline-dot"></span><p>Module 2 – Saving vs Investing</p></div>
            <div class="aj-timeline-item"><span class="aj-timeline-dot"></span><p>Module 3 – Stocks & Stock Market</p></div>
            <div class="aj-timeline-item"><span class="aj-timeline-dot"></span><p>Module 4 – Online Scams & Safety</p></div>
            <div class="aj-timeline-item"><span class="aj-timeline-dot"></span><p>Module 5 – Impact of Investing</p></div>
        </div>
    </section>

    <!-- SECTION 3 + 4 -->
    <div class="row g-4">

        <!-- FRIENDS SECTION -->
        <div class="col-lg-6">
            <section class="aj-friends-section rounded-4 p-4 h-100 d-flex align-items-center reveal-on-scroll">
                <div class="text-white">
                    <h2 class="fw-bold">Friends & Team Learning</h2>
                    <p class="text-size">
                        Learning is always better with friends! On YouthInvest you can:
                    </p>
                    <ul class="text-size">
                        <li>Add friends and learn together</li>
                        <li>Compare badges</li>
                        <li>Team up for missions</li>
                        <li>Celebrate progress together</li>
                    </ul>
                </div>
            </section>
        </div>

        <!-- WHY IT WORKS -->
        <div class="col-lg-6">
            <section class="aj-bordered-card p-4 rounded-4 h-100 reveal-on-scroll">
                <h2 class="fw-bold text-danger">Why YouthInvest Works</h2>
                <p class="text-size">YouthInvest helps you build money skills in a fun way because:</p>
                <ul class="aj-list text-size">
                    <li>You learn by <strong>playing</strong></li>
                    <li>Everything is written for <strong>teens</strong></li>
                    <li>You practice investing with <strong>zero risk</strong></li>
                    <li>You build lifelong financial habits</li>
                </ul>
            </section>
        </div>

    </div>
</div>

<!-- ================================
     JAVASCRIPT ANIMATIONS & EFFECTS
     ================================ -->
<script>
    /* Fade-in on load for elements with .fade-section */
    window.addEventListener("load", () => {
        document.querySelectorAll(".fade-section").forEach(el => {
            el.classList.add("fade-in-visible");
        });
        revealOnScroll(); // run once on load as well
    });

    /* Inject animation CSS */
    document.head.insertAdjacentHTML("beforeend", `
<style>
.fade-section {
    opacity: 0;
    transform: translateY(20px);
    transition: all .6s ease;
}
.fade-in-visible {
    opacity: 1 !important;
    transform: translateY(0) !important;
}

/* Scroll reveal */
.reveal-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all .7s ease;
}
.reveal-visible {
    opacity: 1 !important;
    transform: translateY(0) !important;
}

/* Ripple button */
.ripple-btn {
    position: relative;
    overflow: hidden;
}
.ripple {
    position: absolute;
    width: 120px;
    height: 120px;
    background: rgba(228,30,38,0.35);
    border-radius: 50%;
    transform: scale(0);
    animation: rippleAnim .6s ease-out forwards;
}
@keyframes rippleAnim {
    to {
        transform: scale(2);
        opacity: 0;
    }
}
</style>
`);

    /* Scroll reveal logic */
    const revealEls = document.querySelectorAll(".reveal-on-scroll");

    function revealOnScroll() {
        const trigger = window.innerHeight * 0.85;
        revealEls.forEach(el => {
            const top = el.getBoundingClientRect().top;
            if (top < trigger) {
                el.classList.add("reveal-visible");
            }
        });
    }

    window.addEventListener("scroll", revealOnScroll);

    /* Ripple effect (with small delay before submit) */
    document.querySelectorAll(".ripple-btn").forEach(btn => {
        btn.addEventListener("click", function(e) {
            const rect = btn.getBoundingClientRect();
            const ripple = document.createElement("span");
            ripple.classList.add("ripple");
            ripple.style.left = (e.clientX - rect.left) + "px";
            ripple.style.top = (e.clientY - rect.top) + "px";
            btn.appendChild(ripple);

            // stop instant submit for ripple to show
            e.preventDefault();

            setTimeout(() => {
                btn.closest("form")?.submit();
            }, 160);
        });
    });

    /* Auto-hide alerts */
    const alertBox = document.querySelector(".alert-info");
    if (alertBox) {
        setTimeout(() => {
            alertBox.style.opacity = "0";
            setTimeout(() => alertBox.remove(), 500);
        }, 3000);
    }
</script>

<?php require('template/footer.phtml'); ?>
